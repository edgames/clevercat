{"changed":true,"filter":false,"title":"clevercat.js","tooltip":"/js/clevercat.js","value":"var Phaser;\n\nvar game = new Phaser.Game(640, 480, Phaser.CANVAS, 'game');\n\nvar PhaserGame = function (game) {\n\n\tthis.player = null;\n\tthis.platforms = null;\n\tthis.cursors = null;\n\tthis.score = 0;\n\tthis.scoreText = null;\n\tthis.blocks = null;\n\tthis.storeBlocks = null;\n};\n\nPhaserGame.prototype = {\n\n    init: function () {\n        this.game.world.setBounds(0, 0, 640, 480);\n        this.physics.startSystem(Phaser.Physics.ARCADE);\n        this.physics.arcade.gravity.y = 200;\n    },\n\n    preload: function () {\n\n        this.load.image('sky', 'assets/sky.png');\n        this.load.image('ground', 'assets/platform.png');\n        this.load.spritesheet('cat', 'assets/catwalk.png', 400, 200);\n        this.load.image('topbar', 'assets/Plain Block.png');\n        this.load.image('cliff', 'assets/Grass Block.png');\n        this.load.image('crate', 'assets/Wood Block.png');\n        this.load.image('star', 'assets/star.png')\n\n    },\n\n    create: function () {\n\n        //  We're going to be using physics, so enable the Arcade Physics system\n        this.physics.startSystem(Phaser.Physics.ARCADE);\n\n        //  A simple background for our game\n        this.add.sprite(0, 0, 'sky');\n        \n        //  The platforms group contains the ground and the cliff\n        this.platforms = this.add.group();\n        this.platforms.enableBody = true;\n        var ground = this.platforms.create(0, game.world.height - 64, 'ground');\n        ground.scale.setTo(2, 2); //  Scale it to fit the width of the game (the original sprite is 400x32 in size)\n        ground.body.immovable = true;\n        var cliff = this.platforms.create(game.world.width/2, 1*game.world.height/3, 'cliff');\n        cliff.scale.setTo(3.3, 2);\n        cliff.body.immovable = true;\n\n        // The player and its settings\n        this.player = game.add.sprite(32, game.world.height - 150, 'cat');\n        this.physics.arcade.enable(this.player);\n        this.player.body.bounce.y = 0.05;\n        this.player.body.gravity.y = 800;\n        this.player.body.collideWorldBounds = true;\n        this.player.scale.setTo(0.1, 0.1); // The cat sprite is far too large...\n        this.player.animations.add('left', [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], 10, true);\n        this.player.animations.add('right', [0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11], 10, true);\n  \n        // the bar at the top of the game\n        var topbar = this.add.sprite(0, -13, 'topbar');\n        topbar.scale.setTo(10, 0.3);\n        \n        this.activeBlocks = this.add.group();\n        this.activeBlocks.enableBody = true;\n        this.storeBlocks = this.add.group();\n        this.replenishStoreBlocks();\n\n        // Example text:\n        // this.scoreText = game.add.text(16, 16, 'score: 0', { fontSize: '32px', fill: '#000' });\n\n        this.cursors = game.input.keyboard.createCursorKeys();\n\n    },\n    \n    replenishStoreBlocks: function() {\n        // Delete all existing store blocks and create new ones\n        this.storeBlocks.removeAll(true);\n        var topbarBlock = this.storeBlocks.create(0, 0, 'crate');\n        topbarBlock.scale.setTo(0.3, 0.3);\n        //  Enable input and allow for dragging for the blocks sprite\n        topbarBlock.inputEnabled = true;\n        topbarBlock.input.enableDrag();\n        topbarBlock.events.onDragStart.add(this.onDragStart, this);\n        topbarBlock.events.onDragStop.add(this.onDragStop, this);  \n    },\n    \n    onDragStart: function(sprite, pointer) {\n        this.storeBlocks.remove(sprite);\n        this.activeBlocks.add(sprite);\n        this.replenishStoreBlocks();\n    },\n    \n    onDragStop: function(sprite, pointer) {\n        sprite.events.onDragStart.dispose();\n        sprite.body.gravity.y = 100;\n        sprite.body.bounce.y = 0.10;\n        this.activeBlocks.add(sprite);\n    },\n\n\n    /**\n     * Core update loop. Handles collision checks and player input.\n     *\n     * @method update\n     */\n    update: function () {\n        //  Collide the player the platforms\n        this.game.physics.arcade.collide(this.player, this.platforms);\n        \n        // Collide the player and the active blocks\n        this.game.physics.arcade.collide(this.player, this.activeBlocks);\n        // Collide the \n        this.game.physics.arcade.collide(this.platforms, this.activeBlocks);\n\n        if (this.cursors.left.isDown) {\n            //  Move to the left\n            this.player.body.velocity.x = -150;\n            this.player.animations.play('left');\n            this.player.anchor.setTo(.5, 1); //so it flips around its middle\n            this.player.scale.x = 0.1; //facing default direction\n    \n        } else if (this.cursors.right.isDown) {\n            //  Move to the right\n            this.player.body.velocity.x = 150;\n            this.player.animations.play('right');\n            this.player.anchor.setTo(.5, 1); //so it flips around its middle\n            this.player.scale.x = -0.1; //facing opposite direction\n        } else {\n            //  Stand still\n            this.player.body.velocity.x = 0;\n            this.player.animations.stop();\n            this.player.frame = 0;\n        }\n    \n        //  Allow the player to jump if they are touching the ground.\n        if (this.cursors.up.isDown && this.player.body.touching.down) {\n        \tthis.player.body.velocity.y = -350;\n        }\n    }\n};\n\ngame.state.add('Game', PhaserGame, true);\n","undoManager":{"mark":95,"position":100,"stack":[[{"group":"doc","deltas":[{"start":{"row":85,"column":4},"end":{"row":87,"column":4},"action":"insert","lines":["","    ","    "]}]}],[{"group":"doc","deltas":[{"start":{"row":86,"column":4},"end":{"row":86,"column":9},"action":"insert","lines":["reple"]},{"start":{"row":86,"column":9},"end":{"row":86,"column":10},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":86,"column":10},"end":{"row":86,"column":13},"action":"insert","lines":["ish"]}]}],[{"group":"doc","deltas":[{"start":{"row":86,"column":13},"end":{"row":86,"column":16},"action":"insert","lines":["Sto"]}]}],[{"group":"doc","deltas":[{"start":{"row":86,"column":16},"end":{"row":86,"column":20},"action":"insert","lines":["reBl"]},{"start":{"row":86,"column":20},"end":{"row":86,"column":24},"action":"insert","lines":["ocks"]}]}],[{"group":"doc","deltas":[{"start":{"row":86,"column":24},"end":{"row":86,"column":27},"action":"insert","lines":[": f"]}]}],[{"group":"doc","deltas":[{"start":{"row":86,"column":27},"end":{"row":86,"column":31},"action":"insert","lines":["unct"]},{"start":{"row":86,"column":31},"end":{"row":86,"column":36},"action":"insert","lines":["ion()"]}]}],[{"group":"doc","deltas":[{"start":{"row":86,"column":36},"end":{"row":86,"column":38},"action":"insert","lines":[" {"]},{"start":{"row":86,"column":38},"end":{"row":88,"column":5},"action":"insert","lines":["","        ","    }"]}]}],[{"group":"doc","deltas":[{"start":{"row":88,"column":5},"end":{"row":88,"column":6},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":87,"column":6},"end":{"row":87,"column":8},"action":"insert","lines":["  "]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":8},"end":{"row":75,"column":65},"action":"remove","lines":["var topbarBlock = this.storeBlocks.create(0, 0, 'crate');","        topbarBlock.scale.setTo(0.3, 0.3);","        //  Enable input and allow for dragging for the blocks sprite","        topbarBlock.inputEnabled = true;","        topbarBlock.input.enableDrag();","        topbarBlock.events.onDragStart.add(this.onDragStart, this);","        topbarBlock.events.onDragStop.add(this.onDragStop, this);"]}]}],[{"group":"doc","deltas":[{"start":{"row":81,"column":8},"end":{"row":87,"column":65},"action":"insert","lines":["var topbarBlock = this.storeBlocks.create(0, 0, 'crate');","        topbarBlock.scale.setTo(0.3, 0.3);","        //  Enable input and allow for dragging for the blocks sprite","        topbarBlock.inputEnabled = true;","        topbarBlock.input.enableDrag();","        topbarBlock.events.onDragStart.add(this.onDragStart, this);","        topbarBlock.events.onDragStop.add(this.onDragStop, this);"]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":8},"end":{"row":69,"column":14},"action":"insert","lines":["this.r"]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":14},"end":{"row":69,"column":17},"action":"insert","lines":["epl"]},{"start":{"row":69,"column":13},"end":{"row":69,"column":17},"action":"remove","lines":["repl"]},{"start":{"row":69,"column":13},"end":{"row":69,"column":35},"action":"insert","lines":["replenishStoreBlocks()"]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":34},"end":{"row":69,"column":35},"action":"insert","lines":[";"]},{"start":{"row":69,"column":34},"end":{"row":69,"column":35},"action":"remove","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":34},"end":{"row":69,"column":36},"action":"insert","lines":[");"]}]}],[{"group":"doc","deltas":[{"start":{"row":69,"column":36},"end":{"row":69,"column":37},"action":"remove","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":80,"column":38},"end":{"row":81,"column":8},"action":"insert","lines":["","        "]}]}],[{"group":"doc","deltas":[{"start":{"row":81,"column":8},"end":{"row":81,"column":12},"action":"insert","lines":["this"]}]}],[{"group":"doc","deltas":[{"start":{"row":81,"column":12},"end":{"row":81,"column":13},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":81,"column":10},"end":{"row":81,"column":13},"action":"remove","lines":["is."]}]}],[{"group":"doc","deltas":[{"start":{"row":81,"column":8},"end":{"row":81,"column":10},"action":"remove","lines":["th"]}]}],[{"group":"doc","deltas":[{"start":{"row":81,"column":8},"end":{"row":81,"column":13},"action":"insert","lines":["this."]}]}],[{"group":"doc","deltas":[{"start":{"row":81,"column":13},"end":{"row":81,"column":14},"action":"insert","lines":["s"]},{"start":{"row":81,"column":14},"end":{"row":81,"column":16},"action":"insert","lines":["to"]}]}],[{"group":"doc","deltas":[{"start":{"row":81,"column":13},"end":{"row":81,"column":16},"action":"remove","lines":["sto"]},{"start":{"row":81,"column":13},"end":{"row":81,"column":27},"action":"insert","lines":["storeBlocks.re"]}]}],[{"group":"doc","deltas":[{"start":{"row":81,"column":27},"end":{"row":81,"column":31},"action":"insert","lines":["move"]}]}],[{"group":"doc","deltas":[{"start":{"row":81,"column":31},"end":{"row":81,"column":34},"action":"insert","lines":["All"]}]}],[{"group":"doc","deltas":[{"start":{"row":81,"column":34},"end":{"row":81,"column":39},"action":"insert","lines":["(tru)"]}]}],[{"group":"doc","deltas":[{"start":{"row":81,"column":38},"end":{"row":81,"column":39},"action":"insert","lines":["e"]},{"start":{"row":81,"column":40},"end":{"row":81,"column":41},"action":"insert","lines":[";"]}]}],[{"group":"doc","deltas":[{"start":{"row":92,"column":0},"end":{"row":92,"column":8},"action":"remove","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":91,"column":44},"end":{"row":92,"column":0},"action":"remove","lines":["",""]}]}],[{"group":"doc","deltas":[{"start":{"row":94,"column":8},"end":{"row":94,"column":13},"action":"insert","lines":["this."]}]}],[{"group":"doc","deltas":[{"start":{"row":94,"column":13},"end":{"row":94,"column":17},"action":"insert","lines":["repl"]}]}],[{"group":"doc","deltas":[{"start":{"row":94,"column":13},"end":{"row":94,"column":17},"action":"remove","lines":["repl"]},{"start":{"row":94,"column":13},"end":{"row":94,"column":36},"action":"insert","lines":["replenishStoreBlocks(;)"]}]}],[{"group":"doc","deltas":[{"start":{"row":94,"column":34},"end":{"row":94,"column":35},"action":"remove","lines":[";"]},{"start":{"row":94,"column":34},"end":{"row":94,"column":36},"action":"insert","lines":[");"]}]}],[{"group":"doc","deltas":[{"start":{"row":94,"column":36},"end":{"row":94,"column":37},"action":"remove","lines":[")"]}]}],[{"group":"doc","deltas":[{"start":{"row":73,"column":4},"end":{"row":74,"column":0},"action":"remove","lines":["    ",""]}]}],[{"group":"doc","deltas":[{"start":{"row":72,"column":98},"end":{"row":73,"column":4},"action":"remove","lines":["","    "]}]}],[{"group":"doc","deltas":[{"start":{"row":78,"column":38},"end":{"row":79,"column":9},"action":"insert","lines":["","        /"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":9},"end":{"row":79,"column":10},"action":"insert","lines":["*"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":9},"end":{"row":79,"column":10},"action":"remove","lines":["*"]},{"start":{"row":79,"column":9},"end":{"row":79,"column":10},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":10},"end":{"row":79,"column":14},"action":"insert","lines":[" Del"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":14},"end":{"row":79,"column":18},"action":"insert","lines":["ete "]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":18},"end":{"row":79,"column":23},"action":"insert","lines":["all e"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":23},"end":{"row":79,"column":26},"action":"insert","lines":["xis"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":26},"end":{"row":79,"column":31},"action":"insert","lines":["ting "]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":31},"end":{"row":79,"column":36},"action":"insert","lines":["store"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":36},"end":{"row":79,"column":41},"action":"insert","lines":[" bloc"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":41},"end":{"row":79,"column":47},"action":"insert","lines":["ks and"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":47},"end":{"row":79,"column":48},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":48},"end":{"row":79,"column":52},"action":"insert","lines":["crea"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":52},"end":{"row":79,"column":57},"action":"insert","lines":["te ne"]}]}],[{"group":"doc","deltas":[{"start":{"row":79,"column":57},"end":{"row":79,"column":63},"action":"insert","lines":["w ones"]}]}],[{"group":"doc","deltas":[{"start":{"row":30,"column":58},"end":{"row":31,"column":0},"action":"insert","lines":["",""]},{"start":{"row":31,"column":0},"end":{"row":31,"column":8},"action":"insert","lines":["        "]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":8},"end":{"row":31,"column":9},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":9},"end":{"row":31,"column":10},"action":"insert","lines":["h"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":10},"end":{"row":31,"column":11},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":11},"end":{"row":31,"column":12},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":12},"end":{"row":31,"column":13},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":13},"end":{"row":31,"column":14},"action":"insert","lines":["l"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":14},"end":{"row":31,"column":15},"action":"insert","lines":["o"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":15},"end":{"row":31,"column":16},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":16},"end":{"row":31,"column":17},"action":"insert","lines":["d"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":17},"end":{"row":31,"column":18},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":18},"end":{"row":31,"column":19},"action":"insert","lines":["i"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":19},"end":{"row":31,"column":20},"action":"insert","lines":["m"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":20},"end":{"row":31,"column":21},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":21},"end":{"row":31,"column":22},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":22},"end":{"row":31,"column":23},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":23},"end":{"row":31,"column":25},"action":"insert","lines":["()"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":24},"end":{"row":31,"column":26},"action":"insert","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":24},"end":{"row":31,"column":26},"action":"remove","lines":["\"\""]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":24},"end":{"row":31,"column":26},"action":"insert","lines":["''"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":25},"end":{"row":31,"column":26},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":26},"end":{"row":31,"column":27},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":27},"end":{"row":31,"column":28},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":28},"end":{"row":31,"column":29},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":30},"end":{"row":31,"column":31},"action":"insert","lines":[","]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":31},"end":{"row":31,"column":32},"action":"insert","lines":[" "]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":32},"end":{"row":31,"column":33},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":33},"end":{"row":31,"column":34},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":34},"end":{"row":31,"column":35},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":35},"end":{"row":31,"column":36},"action":"insert","lines":["e"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":36},"end":{"row":31,"column":37},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":37},"end":{"row":31,"column":38},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":38},"end":{"row":31,"column":39},"action":"insert","lines":["/"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":39},"end":{"row":31,"column":40},"action":"insert","lines":["s"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":40},"end":{"row":31,"column":41},"action":"insert","lines":["t"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":41},"end":{"row":31,"column":42},"action":"insert","lines":["a"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":42},"end":{"row":31,"column":43},"action":"insert","lines":["r"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":43},"end":{"row":31,"column":44},"action":"insert","lines":["."]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":44},"end":{"row":31,"column":45},"action":"insert","lines":["p"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":45},"end":{"row":31,"column":46},"action":"insert","lines":["n"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":46},"end":{"row":31,"column":47},"action":"insert","lines":["g"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":47},"end":{"row":31,"column":48},"action":"insert","lines":["'"]}]}],[{"group":"doc","deltas":[{"start":{"row":31,"column":32},"end":{"row":31,"column":33},"action":"insert","lines":["'"]}]}],[{"group":"doc","deltas":[{"start":{"row":115,"column":73},"end":{"row":116,"column":9},"action":"insert","lines":["","        /"]}]}],[{"group":"doc","deltas":[{"start":{"row":116,"column":9},"end":{"row":116,"column":13},"action":"insert","lines":["/ Co"]}]}],[{"group":"doc","deltas":[{"start":{"row":116,"column":13},"end":{"row":116,"column":16},"action":"insert","lines":["lli"]}]}],[{"group":"doc","deltas":[{"start":{"row":116,"column":16},"end":{"row":116,"column":19},"action":"insert","lines":["de "]}]}],[{"group":"doc","deltas":[{"start":{"row":116,"column":19},"end":{"row":116,"column":23},"action":"insert","lines":["the "]}]}]]},"ace":{"folds":[],"scrolltop":295.5,"scrollleft":0,"selection":{"start":{"row":31,"column":50},"end":{"row":31,"column":50},"isBackwards":false},"options":{"guessTabSize":true,"useWrapMode":false,"wrapToView":true},"firstLineState":{"row":17,"state":"start","mode":"ace/mode/javascript"}},"timestamp":1425523010921}